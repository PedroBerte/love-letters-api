-- Cria o banco de dados, se n達o existir
CREATE DATABASE IF NOT EXISTS lovelettersdb;

-- Usa o banco de dados criado
USE lovelettersdb;

-- Cria a tabela users se n達o existir
CREATE TABLE IF NOT EXISTS users (
    guid VARCHAR(36) PRIMARY KEY NOT NULL,
    name VARCHAR(60) NOT NULL,
    email VARCHAR(60) NOT NULL,
    password VARCHAR(60) NOT NULL,
    profilePhoto MEDIUMTEXT NULL,
    partnerGuid VARCHAR(36) NULL,
    partnerName VARCHAR(60) NULL,
    havePartner BOOLEAN NOT NULL
);

-- Cria a tabela invites se n達o existir
CREATE TABLE IF NOT EXISTS invites (
    id INT AUTO_INCREMENT PRIMARY KEY,
    inviteStatus VARCHAR(2) NOT NULL,
    inviteUpdateDate DATETIME NULL,
    inviteDate DATETIME NOT NULL,
    guidInvited VARCHAR(36) NOT NULL,
    guidInviter VARCHAR(36) NOT NULL,
    CONSTRAINT FK_User_Invited FOREIGN KEY (guidInvited) REFERENCES users(guid),
    CONSTRAINT FK_User_Inviter FOREIGN KEY (guidInviter) REFERENCES users(guid)
);

-- Cria a tabela relationship se n達o existir
CREATE TABLE IF NOT EXISTS relationship (
    partnerGuid1 VARCHAR(36) NOT NULL,
    partnerGuid2 VARCHAR(36) NOT NULL,
    status VARCHAR(1) NOT NULL,
    startDate DATETIME NOT NULL,
    endDate DATETIME NULL,
    CONSTRAINT FK_partner1 FOREIGN KEY (partnerGuid1) REFERENCES users(guid),
    CONSTRAINT FK_partner2 FOREIGN KEY (partnerGuid2) REFERENCES users(guid)
);

CREATE TABLE IF NOT EXISTS domains (
	id INT AUTO_INCREMENT PRIMARY KEY,
    cod_domain VARCHAR(16) NOT NULL,
    dcr_sub_domain VARCHAR(50) NOT NULL,
    cod_sub_domain VARCHAR(2) NOT NULL
);









INSERT INTO lovelettersdb.domains
(cod_domain,
dcr_sub_domain,
cod_sub_domain)
SELECT 
'invite_status',
'Recusado',
'RC'
FROM DUAL
WHERE NOT EXISTS (
    SELECT 1 
    FROM lovelettersdb.domains
    WHERE cod_domain = 'invite_status'
    AND cod_sub_domain = 'RC'
);

INSERT INTO lovelettersdb.domains
(cod_domain,
dcr_sub_domain,
cod_sub_domain)
SELECT 
'invite_status',
'Aceito',
'AC'
FROM DUAL
WHERE NOT EXISTS (
    SELECT 1 
    FROM lovelettersdb.domains
    WHERE cod_domain = 'invite_status'
    AND cod_sub_domain = 'AC'
);

INSERT INTO lovelettersdb.domains
(cod_domain,
dcr_sub_domain,
cod_sub_domain)
SELECT 
'invite_status',
'Enviado',
'SD'
FROM DUAL
WHERE NOT EXISTS (
    SELECT 1 
    FROM lovelettersdb.domains
    WHERE cod_domain = 'invite_status'
    AND cod_sub_domain = 'SD'
);

INSERT INTO `lovelettersdb`.`users`
(`guid`,
`name`,
`email`,
`password`,
`profilePhoto`,
`partnerGuid`,
`partnerName`,
`havePartner`)
SELECT 
'575605d6-93c8-40e0-babd-c8331f7ebfa6',
'Pedro Bertelli',
'pedrobertelli19@gmail.com',
'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',
NULL,
NULL,
0 
FROM DUAL
WHERE NOT EXISTS (
    SELECT 1 
    FROM `lovelettersdb`.`users`
    WHERE `email` = 'pedrobertelli19@gmail.com'
);




